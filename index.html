<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>القرآن الكريم - Faraz AI</title>
    <meta name="theme-color" content="#161b22">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="favicon.png" type="image/png">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Noto+Nastaliq+Urdu:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet" />
    <!-- Remix Icons for new buttons -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet"/>
</head>
<body>

    <button id="menu-button" class="menu-button-floating"><span class="material-symbols-outlined">more_vert</span></button>

    <div id="side-menu" class="side-menu">
        <a href="#" onclick="openModal('credits-modal'); return false;">ہمارے بارے میں</a>
        <a href="https://telegra.ph/Privacy-Policy-for-%D8%A7%D9%84%D9%82%D8%B1%D8%A2%D9%86-%D8%A7%D9%84%D9%83%D8%B1%D9%8A%D9%85---Faraz-AI-08-01" target="_blank">پرائیویسی پالیسی</a>
    </div>
    <div id="menu-overlay" class="menu-overlay"></div>

    <main class="main-content">
        <!-- Home Page -->
        <div id="homeCustomPage" class="page active">
            <div class="home-screen-container">
                <!-- NEW: Search bar for Sahaba Stories -->
                <div class="home-search-bar">
                    <input type="text" id="waqiya-search-input" placeholder="واقعہ تلاش کریں...">
                    <span class="material-symbols-outlined">search</span>
                </div>
                <div id="sahaba-stories-container">
                    <!-- Waqiyat will be loaded by script.js -->
                </div>
            </div>
        </div>

        <!-- Quran Page -->
        <div id="quranPage" class="page">
            <div class="page-header"><h1>القرآن الكريم</h1></div>
            <ul id="surah-list"></ul>
        </div>

        <!-- AI Chat Page -->
        <div id="aiPage" class="page">
            <div class="chat-container">
                <div class="chat-messages" id="chat-messages"><div class="message ai-message">السلام علیکم! میں فراز ہوں، آپ کا اسلامی AI اسسٹنٹ۔ آپ مجھ سے کوئی بھی اسلامی سوال پوچھ سکتے ہیں۔</div></div>
                <div class="chat-input-area"><input type="text" id="chat-input" placeholder="یہاں سوال لکھیں..."><button id="send-chat-button"><span class="material-symbols-outlined">send</span></button></div>
            </div>
        </div>

        <!-- Tasbih Page -->
        <div id="tasbihPage" class="page">
            <div class="tasbih-header"><select id="tasbih-select"></select></div>
            <div class="tasbih-container">
                <div class="tasbih-counter-ring"><div class="tasbih-counter" id="tasbih-counter">0</div></div>
                <div class="tasbih-bead-wrapper"><button class="tasbih-bead" id="tasbih-bead"></button></div>
                <div class="tasbih-controls">
                    <button class="reset-button" id="reset-button"><span class="material-symbols-outlined">restart_alt</span></button>
                    <div class="target-display" id="target-display">/ 33</div>
                </div>
            </div>
        </div>

        <!-- Dua Page -->
        <div id="duaPage" class="page">
            <div class="page-header">
                <h1>دعائیں اور اذکار</h1>
                <button id="show-names-btn">اللہ کے 99 نام</button>
            </div>
            <!-- NEW: Button for Sawal Jawab -->
            <div class="dua-main-options">
                 <button class="category-button special-box" onclick="showPage('sawalJawabPage')">
                    <span class="material-symbols-outlined">quiz</span>
                    اسلامی سوالات
                </button>
            </div>
            <div id="dua-categories"></div>
            <div id="dua-list"></div>
        </div>

        <!-- Surah Detail Page -->
        <div id="surahDetailPage" class="page">
             <button class="back-button" onclick="showPage('quranPage')">⇦ تمام سورتیں</button>
             <header id="surahHeader" class="header"></header>
             <div id="audio-player-container"><audio id="mainAudioPlayer" controls preload="metadata"></audio></div>
             <main id="surahContainer" class="surah-container"></main>
        </div>

        <!-- NEW: Sawal Jawab Page -->
        <div id="sawalJawabPage" class="page">
            <div class="page-header">
                 <button class="back-button" onclick="showPage('duaPage')">⇦ دعائیں</button>
                <h1>اسلامی سوالات</h1>
            </div>
            <div class="home-search-bar">
                 <input type="text" id="sawal-jawab-search-input" placeholder="سوال تلاش کریں...">
                 <span class="material-symbols-outlined">search</span>
            </div>
            <div id="sawal-jawab-list" class="content-list">
                <!-- Sawal Jawab content will be loaded by JS -->
            </div>
        </div>
    </main>

    <nav class="bottom-nav">
        <button class="nav-button" data-page="quranPage"><span class="material-symbols-outlined">menu_book</span><span class="nav-label">Quran</span></button>
        <button class="nav-button" data-page="aiPage"><div class="ai-icon-container"></div><span class="nav-label">Faraz AI</span></button>
        <button class="nav-button active" data-page="homeCustomPage"><span class="material-symbols-outlined">home</span><span class="nav-label">Home</span></button>
        <button class="nav-button" data-page="tasbihPage"><span class="material-symbols-outlined">counter_1</span><span class="nav-label">Tasbih</span></button>
        <button class="nav-button" data-page="duaPage"><span class="material-symbols-outlined">spa</span><span class="nav-label">Dua</span></button>
    </nav>
    
    <!-- Modals -->
    <div id="credits-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeAllModals()">&times;</span>
            <h2>ہمارے بارے میں اور شکریہ</h2>
            <p style="text-align: right; margin-bottom: 20px;">یہ ایپ قرآن کی تعلیم کو آسان، جدید اور ہر ایک کے لیے قابلِ رسائی بنانے کے مقصد سے بنائی گئی ہے۔ یہ پروجیکٹ دین کی خدمت میں ایک چھوٹی سی کوشش ہے۔</p>
            <div class="credits-section">
                <p><b>قرآنی متن اور API:</b><br>قرآن کا عربی متن، تراجم اور سورہ کی معلومات کے لئے ہم <a href="https://quran.com" target="_blank">Quran.com</a> کے انتہائی شکر گزار ہیں۔ ان کی شاندار API کے بغیر یہ ایپ ممکن نہیں تھی۔</p>
                <p><b>آڈیو تلاوت:</b><br>اس ایپ میں دل کو چھو لینے والی تلاوت مشہور قاری <b>الشیخ مشاری بن راشد العفاسی</b> کی ہے۔ آڈیو فائلیں Quran.com API کے ذریعے حاصل کی گئی ہیں۔ ہم دعا گو ہیں کہ اللہ ان کے درجات بلند فرمائے۔</p>
                <p><b>AI اسسٹنٹ "Islamic AI":</b><br>اسلامی سوالات کے جوابات دینے اور رہنمائی فراہم کرنے کے لئے <b>Google's Gemini AI</b> ماڈل کا استعمال کیا گیا ہے۔ یہ ٹیکنالوجی دینی علم کو سمجھنے کا ایک جدید ذریعہ فراہم کرتی ہے۔</p>
            </div>
            <p style="text-align: center; margin-top: 30px; font-size: 0.9rem; opacity: 0.8;">اس ایپ کا مقصد تعلیمی اور معلوماتی ہے۔ اگر آپ کو کوئی خامی نظر آئے تو براہِ کرم ہمیں ہمارے ای میل پر مطلع کریں۔</p>
        </div>
    </div>
    <div id="names-modal" class="modal"><div class="modal-content"><span class="close-button" onclick="closeAllModals()">×</span><h2>اللہ کے 99 نام</h2><div id="names-container"></div></div></div>
    <!-- Story Modal will be created dynamically by JavaScript -->

    <script src="script.js"></script>
    
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => console.log('ServiceWorker registration successful with scope: ', registration.scope))
                    .catch(err => console.log('ServiceWorker registration failed: ', err));
            });
        }
    </script>
</body>
</html>
